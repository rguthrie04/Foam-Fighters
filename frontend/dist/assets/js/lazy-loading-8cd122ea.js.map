{"version":3,"file":"lazy-loading-8cd122ea.js","sources":["../../../assets/js/lazy-loading.js"],"sourcesContent":["/**\r\n * Lazy Loading Utilities\r\n * Implements intersection observer for images and content\r\n */\r\n\r\nclass LazyLoader {\r\n    constructor() {\r\n        this.imageObserver = null;\r\n        this.contentObserver = null;\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        // Only initialize if browser supports IntersectionObserver\r\n        if ('IntersectionObserver' in window) {\r\n            this.setupImageLazyLoading();\r\n            this.setupContentLazyLoading();\r\n        } else {\r\n            // Fallback for older browsers - load everything immediately\r\n            this.loadAllImages();\r\n        }\r\n    }\r\n\r\n    setupImageLazyLoading() {\r\n        const imageObserverOptions = {\r\n            root: null,\r\n            rootMargin: '50px',\r\n            threshold: 0.1\r\n        };\r\n\r\n        this.imageObserver = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    this.loadImage(entry.target);\r\n                    this.imageObserver.unobserve(entry.target);\r\n                }\r\n            });\r\n        }, imageObserverOptions);\r\n\r\n        // Observe all lazy images\r\n        this.observeLazyImages();\r\n    }\r\n\r\n    setupContentLazyLoading() {\r\n        const contentObserverOptions = {\r\n            root: null,\r\n            rootMargin: '100px',\r\n            threshold: 0.1\r\n        };\r\n\r\n        this.contentObserver = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.classList.add('lazy-loaded');\r\n                    this.contentObserver.unobserve(entry.target);\r\n                }\r\n            });\r\n        }, contentObserverOptions);\r\n\r\n        // Observe all lazy content\r\n        this.observeLazyContent();\r\n    }\r\n\r\n    observeLazyImages() {\r\n        const lazyImages = document.querySelectorAll('img[data-src]');\r\n        lazyImages.forEach(img => {\r\n            this.imageObserver.observe(img);\r\n        });\r\n    }\r\n\r\n    observeLazyContent() {\r\n        const lazyContent = document.querySelectorAll('.lazy-content');\r\n        lazyContent.forEach(content => {\r\n            this.contentObserver.observe(content);\r\n        });\r\n    }\r\n\r\n    loadImage(img) {\r\n        // Show loading placeholder\r\n        img.classList.add('loading');\r\n        \r\n        const actualImg = new Image();\r\n        actualImg.onload = () => {\r\n            // Replace data-src with src\r\n            img.src = img.dataset.src;\r\n            img.classList.remove('loading');\r\n            img.classList.add('loaded');\r\n            \r\n            // Remove data-src to prevent reprocessing\r\n            delete img.dataset.src;\r\n        };\r\n        \r\n        actualImg.onerror = () => {\r\n            img.classList.remove('loading');\r\n            img.classList.add('error');\r\n            // Set fallback image\r\n            img.src = '/assets/images/placeholder.svg';\r\n        };\r\n        \r\n        actualImg.src = img.dataset.src;\r\n    }\r\n\r\n    loadAllImages() {\r\n        // Fallback for browsers without IntersectionObserver\r\n        const lazyImages = document.querySelectorAll('img[data-src]');\r\n        lazyImages.forEach(img => {\r\n            img.src = img.dataset.src;\r\n            delete img.dataset.src;\r\n        });\r\n    }\r\n\r\n    // Method to add new images to lazy loading (for dynamic content)\r\n    addNewImages(container = document) {\r\n        if (this.imageObserver) {\r\n            const newLazyImages = container.querySelectorAll('img[data-src]');\r\n            newLazyImages.forEach(img => {\r\n                this.imageObserver.observe(img);\r\n            });\r\n        }\r\n    }\r\n\r\n    // Method to add new content to lazy loading\r\n    addNewContent(container = document) {\r\n        if (this.contentObserver) {\r\n            const newLazyContent = container.querySelectorAll('.lazy-content');\r\n            newLazyContent.forEach(content => {\r\n                this.contentObserver.observe(content);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n// Auto-initialize when DOM is ready\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        window.lazyLoader = new LazyLoader();\r\n    });\r\n} else {\r\n    window.lazyLoader = new LazyLoader();\r\n}\r\n\r\nexport default LazyLoader;"],"names":["LazyLoader","imageObserverOptions","entries","entry","contentObserverOptions","img","content","actualImg","container"],"mappings":"AAKA,MAAMA,CAAW,CACb,aAAc,CACV,KAAK,cAAgB,KACrB,KAAK,gBAAkB,KACvB,KAAK,KAAI,CACZ,CAED,MAAO,CAEC,yBAA0B,QAC1B,KAAK,sBAAqB,EAC1B,KAAK,wBAAuB,GAG5B,KAAK,cAAa,CAEzB,CAED,uBAAwB,CACpB,MAAMC,EAAuB,CACzB,KAAM,KACN,WAAY,OACZ,UAAW,EACvB,EAEQ,KAAK,cAAgB,IAAI,qBAAsBC,GAAY,CACvDA,EAAQ,QAAQC,GAAS,CACjBA,EAAM,iBACN,KAAK,UAAUA,EAAM,MAAM,EAC3B,KAAK,cAAc,UAAUA,EAAM,MAAM,EAE7D,CAAa,CACJ,EAAEF,CAAoB,EAGvB,KAAK,kBAAiB,CACzB,CAED,yBAA0B,CACtB,MAAMG,EAAyB,CAC3B,KAAM,KACN,WAAY,QACZ,UAAW,EACvB,EAEQ,KAAK,gBAAkB,IAAI,qBAAsBF,GAAY,CACzDA,EAAQ,QAAQC,GAAS,CACjBA,EAAM,iBACNA,EAAM,OAAO,UAAU,IAAI,aAAa,EACxC,KAAK,gBAAgB,UAAUA,EAAM,MAAM,EAE/D,CAAa,CACJ,EAAEC,CAAsB,EAGzB,KAAK,mBAAkB,CAC1B,CAED,mBAAoB,CACG,SAAS,iBAAiB,eAAe,EACjD,QAAQC,GAAO,CACtB,KAAK,cAAc,QAAQA,CAAG,CAC1C,CAAS,CACJ,CAED,oBAAqB,CACG,SAAS,iBAAiB,eAAe,EACjD,QAAQC,GAAW,CAC3B,KAAK,gBAAgB,QAAQA,CAAO,CAChD,CAAS,CACJ,CAED,UAAUD,EAAK,CAEXA,EAAI,UAAU,IAAI,SAAS,EAE3B,MAAME,EAAY,IAAI,MACtBA,EAAU,OAAS,IAAM,CAErBF,EAAI,IAAMA,EAAI,QAAQ,IACtBA,EAAI,UAAU,OAAO,SAAS,EAC9BA,EAAI,UAAU,IAAI,QAAQ,EAG1B,OAAOA,EAAI,QAAQ,GAC/B,EAEQE,EAAU,QAAU,IAAM,CACtBF,EAAI,UAAU,OAAO,SAAS,EAC9BA,EAAI,UAAU,IAAI,OAAO,EAEzBA,EAAI,IAAM,gCACtB,EAEQE,EAAU,IAAMF,EAAI,QAAQ,GAC/B,CAED,eAAgB,CAEO,SAAS,iBAAiB,eAAe,EACjD,QAAQA,GAAO,CACtBA,EAAI,IAAMA,EAAI,QAAQ,IACtB,OAAOA,EAAI,QAAQ,GAC/B,CAAS,CACJ,CAGD,aAAaG,EAAY,SAAU,CAC3B,KAAK,eACiBA,EAAU,iBAAiB,eAAe,EAClD,QAAQH,GAAO,CACzB,KAAK,cAAc,QAAQA,CAAG,CAC9C,CAAa,CAER,CAGD,cAAcG,EAAY,SAAU,CAC5B,KAAK,iBACkBA,EAAU,iBAAiB,eAAe,EAClD,QAAQF,GAAW,CAC9B,KAAK,gBAAgB,QAAQA,CAAO,CACpD,CAAa,CAER,CACL,CAGI,SAAS,aAAe,UACxB,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,OAAO,WAAa,IAAIN,CAChC,CAAK,EAED,OAAO,WAAa,IAAIA"}