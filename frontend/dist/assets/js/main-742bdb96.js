(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function i(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(s){if(s.ep)return;s.ep=!0;const t=i(s);fetch(s.href,t)}})();const E="modulepreload",I=function(l){return"/"+l},b={},L=function(e,i,o){if(!i||i.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(i.map(t=>{if(t=I(t),t in b)return;b[t]=!0;const n=t.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(!!o)for(let f=s.length-1;f>=0;f--){const h=s[f];if(h.href===t&&(!n||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${r}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":E,n||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),n)return new Promise((f,h)=>{a.addEventListener("load",f),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>e()).catch(t=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=t,window.dispatchEvent(n),!n.defaultPrevented)throw t})};function m(l,e={}){typeof console!="undefined"&&console.log&&console.log(`[Foam Fighters] ${l}`,e)}function u(l,e={}){typeof console!="undefined"&&console.error&&console.error(`[Foam Fighters ERROR] ${l}`,e)}function w(l,e,i=""){try{return setTimeout(l,e)}catch(o){u("Timer error",o)}}function c(l,e,i,o=!1,s=""){try{if(l&&l.addEventListener)return l.addEventListener(e,i,o),`${s}_${Date.now()}`}catch(t){u("Event listener error",t)}return null}function p(l){v(l,"success")}function g(l){v(l,"error")}function v(l,e="info"){let i=document.getElementById("toast-container");i||(i=document.createElement("div"),i.id="toast-container",i.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(i));const o=document.createElement("div");o.className=`toast show toast-${e}`,o.setAttribute("role","alert"),o.innerHTML=`
        <div class="toast-body">
            <i class="fas fa-${e==="success"?"check-circle":e==="error"?"times-circle":e==="warning"?"exclamation-triangle":"info-circle"} me-2"></i>
            ${l}
            <button type="button" class="btn-close float-end" data-bs-dismiss="toast"></button>
        </div>
    `,i.appendChild(o),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},5e3)}class q{constructor(){this.isInitialized=!1,this.listenerIds=[],document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}async init(){try{m("Initializing Foam Fighters website"),await this.initializeLazyLoading(),await this.initializeNavigation(),await this.initializeQuoteForm(),await this.initializeContactForm(),await this.initializeChatWidget(),await this.initializeScrollEffects(),await this.initializeAccessibility(),await this.initializeAnalytics(),this.isInitialized=!0,m("Foam Fighters website initialized successfully")}catch(e){u("Error initializing website",e)}}async initializeNavigation(){try{const e=document.getElementById("mainNavbar");if(!e)return;const i=c(window,"scroll",()=>{window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")},!1,"navbar-scroll");i&&this.listenerIds.push(i),document.querySelectorAll('a[href^="#"]').forEach(n=>{const r=c(n,"click",d=>{d.preventDefault();const a=n.getAttribute("href").substring(1),f=document.getElementById(a);if(f){const h=f.offsetTop-80;window.scrollTo({top:h,behavior:"smooth"})}},!1,"smooth-scroll");r&&this.listenerIds.push(r)}),document.querySelectorAll(".navbar-nav .nav-link:not(.dropdown-toggle)").forEach(n=>{const r=c(n,"click",()=>{const d=document.getElementById("navbarNav");d&&d.classList.contains("show")&&new bootstrap.Collapse(d).hide()},!1,"mobile-menu-close");r&&this.listenerIds.push(r)}),document.querySelectorAll(".dropdown-item").forEach(n=>{const r=c(n,"click",()=>{const d=document.getElementById("navbarNav");d&&d.classList.contains("show")&&new bootstrap.Collapse(d).hide()},!1,"dropdown-item-close");r&&this.listenerIds.push(r)}),this.setupMobileDropdowns(),this.addSimpleMobileDropdownFallback(),m("Navigation initialized")}catch(e){u("Error initializing navigation",e)}}async initializeQuoteForm(){try{const e=document.getElementById("quoteForm");if(!e)return;const i=c(e,"submit",async t=>{t.preventDefault(),await this.handleQuoteSubmission(e)},!1,"quote-form-submit");i&&this.listenerIds.push(i),e.querySelectorAll("input, select, textarea").forEach(t=>{const n=c(t,"blur",()=>{this.validateField(t)},!1,"form-validation");n&&this.listenerIds.push(n)}),document.querySelectorAll('input[type="tel"]').forEach(t=>{const n=c(t,"input",()=>{this.formatPhoneNumber(t)},!1,"phone-formatting");n&&this.listenerIds.push(n)}),m("Quote form initialized")}catch(e){u("Error initializing quote form",e)}}async initializeContactForm(){try{const e=document.getElementById("contactForm");if(!e)return;const i=c(e,"submit",async t=>{t.preventDefault(),await this.handleContactSubmission(e)},!1,"contact-form-submit");i&&this.listenerIds.push(i),e.querySelectorAll("input, select, textarea").forEach(t=>{const n=c(t,"blur",()=>{this.validateField(t)},!1,"form-validation");n&&this.listenerIds.push(n)});const s=e.querySelector('input[type="tel"]');if(s){const t=c(s,"input",()=>{this.formatPhoneNumber(s)},!1,"phone-formatting");t&&this.listenerIds.push(t)}m("Contact form initialized")}catch(e){u("Error initializing contact form",e)}}async handleQuoteSubmission(e){try{if(!this.validateForm(e)){g("Please correct the errors in the form before submitting.");return}const i=e.querySelector('button[type="submit"]'),o=i.querySelector(".submit-text"),s=i.querySelector(".loading-text");i.disabled=!0,o.classList.add("d-none"),s.classList.remove("d-none");const t=new FormData(e),n={name:`${t.get("firstName")} ${t.get("lastName")}`.trim(),firstName:t.get("firstName"),lastName:t.get("lastName"),email:t.get("email"),phone:t.get("phone"),address:t.get("address"),propertyType:t.get("propertyType"),foamType:t.get("foamType"),estimatedArea:t.get("estimatedArea")?parseInt(t.get("estimatedArea")):null,urgency:t.get("urgency"),subject:t.get("subject"),message:t.get("message"),preferredContact:t.get("preferredContact"),consent:t.get("consent")==="on"};let r;window.FirebaseConfig&&window.FirebaseConfig.apiCall?r=await window.FirebaseConfig.apiCall("/inquiries",{method:"POST",body:JSON.stringify(n)}):r=await(await fetch("https://api-6swwnulcrq-nw.a.run.app/inquiries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json(),p("Your quote request has been submitted successfully! We'll contact you within 24-48 hours."),e.reset(),this.trackConversion("quote_request",{urgency:n.urgency,propertyType:n.propertyType}),r.inquiry&&r.inquiry.referenceNumber&&p("Thank you! Your quote request has been submitted. Reference number: "+r.inquiry.referenceNumber)}catch(i){u("Error submitting quote form",i),g("There was an error submitting your request. Please try again or call us directly at 0333 577 0132.")}finally{const i=e.querySelector('button[type="submit"]'),o=i.querySelector(".submit-text"),s=i.querySelector(".loading-text");i.disabled=!1,o.classList.remove("d-none"),s.classList.add("d-none")}}async handleContactSubmission(e){try{if(!this.validateForm(e)){g("Please correct the errors in the form before submitting.");return}const i=e.querySelector('button[type="submit"]'),o=i.querySelector(".submit-text")||i,s=i.querySelector(".loading-text");i.disabled=!0,s?(o.classList.add("d-none"),s.classList.remove("d-none")):i.textContent="Submitting...";const t=new FormData(e),n=Array.from(t.getAll("foamLocation[]")),r=Array.from(t.getAll("issues[]")),d={name:`${t.get("firstName")} ${t.get("lastName")}`.trim(),firstName:t.get("firstName"),lastName:t.get("lastName"),email:t.get("email"),phone:t.get("phone"),propertyType:t.get("propertyType"),urgency:t.get("urgency"),postcode:t.get("postcode"),foamLocation:n,foamAge:t.get("foamAge"),issues:r,message:t.get("message"),subject:"Contact Form Submission",preferredContact:"email",consent:t.get("consent")==="on",urgencyLevel:this.mapContactUrgencyToLevel(t.get("urgency"))};let a;window.FirebaseConfig&&window.FirebaseConfig.apiCall?a=await window.FirebaseConfig.apiCall("/inquiries",{method:"POST",body:JSON.stringify(d)}):a=await(await fetch("https://api-6swwnulcrq-nw.a.run.app/inquiries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json(),p("Thank you for your contact! We'll be in touch within 24 hours to discuss your spray foam situation."),e.reset(),this.trackConversion("contact_form",{urgency:d.urgency,propertyType:d.propertyType,issues:r.length}),a.inquiry&&a.inquiry.referenceNumber&&w(()=>{p("Your reference number is: "+a.inquiry.referenceNumber)},2e3)}catch(i){u("Error submitting contact form",i),g("There was an error submitting your message. Please try again or call us directly at 0333 577 0132.")}finally{const i=e.querySelector('button[type="submit"]'),o=i.querySelector(".submit-text")||i,s=i.querySelector(".loading-text");i.disabled=!1,s?(o.classList.remove("d-none"),s.classList.add("d-none")):i.textContent="Submit Contact Request"}}mapContactUrgencyToLevel(e){return{planning:"low",mortgage:"high",sale:"urgent",insurance:"high",emergency:"urgent"}[e]||"medium"}validateForm(e){let i=!0;return e.querySelectorAll("[required]").forEach(s=>{this.validateField(s)||(i=!1)}),i}validateField(e){const i=e.value.trim();let o=!0,s="";if(e.classList.remove("is-invalid","is-valid"),e.hasAttribute("required")&&!i&&(o=!1,s="This field is required."),e.type==="email"&&i&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)||(o=!1,s="Please enter a valid email address.")),e.type==="tel"&&i&&(/^[\+]?[(]?[\d\s\-\(\)]{10,}$/.test(i)||(o=!1,s="Please enter a valid phone number.")),e.type==="number"&&i){const t=parseInt(i),n=parseInt(e.getAttribute("min")),r=parseInt(e.getAttribute("max"));(isNaN(t)||n&&t<n||r&&t>r)&&(o=!1,s=`Please enter a number between ${n||0} and ${r||"unlimited"}.`)}if(o&&i)e.classList.add("is-valid");else if(!o){e.classList.add("is-invalid");const t=e.parentNode.querySelector(".invalid-feedback");t&&(t.textContent=s)}return o}formatPhoneNumber(e){let i=e.value.replace(/\D/g,"");if(i.startsWith("44")?i="+44 "+i.substring(2):i.startsWith("0")&&(i=i.substring(1),i="+44 "+i),i.startsWith("+44")){const o=i.substring(3).replace(/\s/g,"");o.length>=10&&(i=`+44 ${o.substring(0,4)} ${o.substring(4,7)} ${o.substring(7,10)}`)}e.value=i}async initializeChatWidget(){try{const e=document.getElementById("chat-widget");if(!e)return;e.innerHTML=`
                <div class="chat-trigger">
                    <i class="fas fa-comments"></i>
                    Chat with us
                </div>
            `;const i=c(e,"click",()=>{this.openChatWidget()},!1,"chat-widget-click");i&&this.listenerIds.push(i),w(()=>{e.style.display="block",e.style.animation="fadeInUp 0.5s ease"},5e3,"show-chat-widget"),m("Chat widget initialized")}catch(e){u("Error initializing chat widget",e)}}openChatWidget(){const e=document.createElement("div");e.className="modal fade",e.innerHTML=`
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Contact Foam Fighters</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p>We're here to help! Choose your preferred way to get in touch:</p>
                        <div class="d-grid gap-2">
                            <a href="tel:0333577032" class="btn btn-primary">
                                <i class="fas fa-phone me-2"></i>Call: 0333 577 0132
                            </a>
                            <a href="mailto:info@foamfighters.co.uk" class="btn btn-outline-primary">
                                <i class="fas fa-envelope me-2"></i>Email: info@foamfighters.co.uk
                            </a>
                            <a href="#quote-form" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                <i class="fas fa-calculator me-2"></i>Get a Quote
                            </a>
                        </div>
                        <hr>
                        <p class="text-muted small">
                            <strong>Business Hours:</strong> Monday-Friday: 8:00 AM - 6:00 PM<br>
                            <strong>Emergency Service:</strong> Available for urgent property sale situations
                        </p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(e),new bootstrap.Modal(e).show(),e.addEventListener("hidden.bs.modal",()=>{document.body.removeChild(e)})}async initializeScrollEffects(){try{const e={threshold:.1,rootMargin:"0px 0px -50px 0px"},i=new IntersectionObserver(s=>{s.forEach(t=>{t.isIntersecting&&(t.target.style.animation="fadeInUp 0.6s ease forwards",i.unobserve(t.target))})},e);document.querySelectorAll(".problem-card, .process-step, .trust-item").forEach(s=>{s.style.opacity="0",s.style.transform="translateY(20px)",i.observe(s)}),m("Scroll effects initialized")}catch(e){u("Error initializing scroll effects",e)}}async initializeAccessibility(){try{document.addEventListener("shown.bs.modal",o=>{const t=o.target.querySelector("[autofocus], .btn-primary, input, button");t&&t.focus()}),document.querySelectorAll('[role="button"]').forEach(o=>{const s=c(o,"keydown",t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),o.click())},!1,"custom-button-keyboard");s&&this.listenerIds.push(s)}),document.querySelectorAll('[href^="#"]').forEach(o=>{const s=c(o,"click",t=>{const n=o.getAttribute("href");if(!(n==="#"||o.getAttribute("data-bs-toggle")))try{const r=document.querySelector(n);r&&(r.focus(),r.scrollIntoView())}catch(r){safeDebugWarn("Invalid href selector:",n)}},!1,"skip-link");s&&this.listenerIds.push(s)}),m("Accessibility features initialized")}catch(e){u("Error initializing accessibility",e)}}async initializeAnalytics(){try{this.trackPageView(),document.querySelectorAll("form").forEach(s=>{const t=c(s,"submit",()=>{this.trackEvent("form_submit",{form_id:s.id||"unknown"})},!1,"form-analytics");t&&this.listenerIds.push(t)}),document.querySelectorAll('a[href^="tel:"]').forEach(s=>{const t=c(s,"click",()=>{this.trackEvent("phone_click",{phone_number:s.getAttribute("href")})},!1,"phone-analytics");t&&this.listenerIds.push(t)}),document.querySelectorAll('a[href^="mailto:"]').forEach(s=>{const t=c(s,"click",()=>{this.trackEvent("email_click",{email:s.getAttribute("href")})},!1,"email-analytics");t&&this.listenerIds.push(t)}),m("Analytics initialized")}catch(e){u("Error initializing analytics",e)}}trackPageView(){try{typeof gtag!="undefined"&&gtag("config","GA_MEASUREMENT_ID",{page_title:document.title,page_location:window.location.href}),m("Page view tracked",{page:window.location.pathname,title:document.title})}catch(e){u("Error tracking page view",e)}}trackEvent(e,i={}){try{typeof gtag!="undefined"&&gtag("event",e,i),m("Event tracked",{eventName:e,parameters:i})}catch(o){u("Error tracking event",o)}}trackConversion(e,i={}){try{this.trackEvent("conversion",{conversion_type:e,...i}),m("Conversion tracked",{conversionType:e,data:i})}catch(o){u("Error tracking conversion",o)}}async initializeLazyLoading(){try{const{default:e}=await L(()=>import("./lazy-loading-8cd122ea.js"),[]);this.lazyLoader=new e,m("Lazy loading initialized")}catch(e){u("Lazy loading initialization failed",e),this.fallbackImageLoading()}}fallbackImageLoading(){document.querySelectorAll("img[data-src]").forEach(i=>{i.src=i.dataset.src,i.removeAttribute("data-src")})}setupMobileDropdowns(){try{const e=()=>{document.querySelectorAll(".nav-item.dropdown").forEach(s=>{const t=s.querySelector(".dropdown-toggle"),n=s.querySelector(".dropdown-menu");if(!t||!n)return;window.innerWidth<=991&&t.removeAttribute("data-bs-toggle");const r=c(t,"click",a=>{if(window.innerWidth<=991){a.preventDefault(),a.stopPropagation();const f=s.classList.contains("show");document.querySelectorAll(".nav-item.dropdown").forEach(h=>{h.classList.remove("show");const y=h.querySelector(".dropdown-menu");y&&y.classList.remove("show")}),f||(s.classList.add("show"),n.classList.add("show"),m("Mobile dropdown opened"))}},!1,"mobile-dropdown-click"),d=c(t,"touchstart",a=>{window.innerWidth<=991&&(t.style.webkitTouchCallout="none",t.style.webkitUserSelect="none")},{passive:!0},"mobile-dropdown-touchstart");r&&this.listenerIds.push(r),d&&this.listenerIds.push(d)});const o=c(document.body,"click",s=>{window.innerWidth<=991&&(s.target.closest(".nav-item.dropdown")||document.querySelectorAll(".nav-item.dropdown.show").forEach(n=>{n.classList.remove("show");const r=n.querySelector(".dropdown-menu");r&&r.classList.remove("show")}))},!1,"mobile-dropdown-outside-click");o&&this.listenerIds.push(o)};if(typeof bootstrap!="undefined")e();else{const i=setInterval(()=>{typeof bootstrap!="undefined"&&(clearInterval(i),e())},100);setTimeout(e,2e3)}m("Mobile dropdowns setup initiated")}catch(e){u("Error setting up mobile dropdowns",e)}}addSimpleMobileDropdownFallback(){try{const e=document.querySelector(".nav-link.dropdown-toggle");if(e){const i=c(e,"touchend",o=>{if(window.innerWidth<=991){o.preventDefault();const s=e.closest(".nav-item.dropdown"),t=s.querySelector(".dropdown-menu");t&&(t.style.display==="block"||t.classList.contains("show")?(t.style.display="none",t.classList.remove("show"),s.classList.remove("show")):(t.style.display="block",t.classList.add("show"),s.classList.add("show")))}},{passive:!1},"mobile-dropdown-fallback");i&&this.listenerIds.push(i),m("Mobile dropdown fallback added")}}catch(e){u("Error setting up mobile dropdown fallback",e)}}cleanup(){try{m("App cleanup completed")}catch(e){u("Error during cleanup",e)}}}const k=new q;window.addEventListener("beforeunload",()=>{k.cleanup()});window.FoamFightersApp=k;
//# sourceMappingURL=main-742bdb96.js.map
