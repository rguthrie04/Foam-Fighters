(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function i(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(s){if(s.ep)return;s.ep=!0;const t=i(s);fetch(s.href,t)}})();function u(a,e={}){typeof console<"u"&&console.log&&console.log(`[Foam Fighters] ${a}`,e)}function c(a,e={}){typeof console<"u"&&console.error&&console.error(`[Foam Fighters ERROR] ${a}`,e)}function g(a,e,i=""){try{return setTimeout(a,e)}catch(r){c("Timer error",r)}}function l(a,e,i,r=!1,s=""){try{if(a&&a.addEventListener)return a.addEventListener(e,i,r),`${s}_${Date.now()}`}catch(t){c("Event listener error",t)}return null}function f(a){y(a,"success")}function h(a){y(a,"error")}function y(a,e="info"){let i=document.getElementById("toast-container");i||(i=document.createElement("div"),i.id="toast-container",i.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(i));const r=document.createElement("div");r.className=`toast show toast-${e}`,r.setAttribute("role","alert"),r.innerHTML=`
        <div class="toast-body">
            <i class="fas fa-${e==="success"?"check-circle":e==="error"?"times-circle":e==="warning"?"exclamation-triangle":"info-circle"} me-2"></i>
            ${a}
            <button type="button" class="btn-close float-end" data-bs-dismiss="toast"></button>
        </div>
    `,i.appendChild(r),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},5e3)}class v{constructor(){this.isInitialized=!1,this.listenerIds=[],document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}async init(){try{u("Initializing Foam Fighters website"),await this.initializeNavigation(),await this.initializeQuoteForm(),await this.initializeContactForm(),await this.initializeChatWidget(),await this.initializeScrollEffects(),await this.initializeAccessibility(),await this.initializeAnalytics(),this.isInitialized=!0,u("Foam Fighters website initialized successfully")}catch(e){c("Error initializing website",e)}}async initializeNavigation(){try{const e=document.getElementById("mainNavbar");if(!e)return;const i=l(window,"scroll",()=>{window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")},!1,"navbar-scroll");i&&this.listenerIds.push(i),document.querySelectorAll('a[href^="#"]').forEach(t=>{const n=l(t,"click",o=>{o.preventDefault();const m=t.getAttribute("href").substring(1),d=document.getElementById(m);if(d){const p=d.offsetTop-80;window.scrollTo({top:p,behavior:"smooth"})}},!1,"smooth-scroll");n&&this.listenerIds.push(n)}),document.querySelectorAll(".navbar-nav .nav-link").forEach(t=>{const n=l(t,"click",()=>{const o=document.getElementById("navbarNav");o&&o.classList.contains("show")&&new bootstrap.Collapse(o).hide()},!1,"mobile-menu-close");n&&this.listenerIds.push(n)}),u("Navigation initialized")}catch(e){c("Error initializing navigation",e)}}async initializeQuoteForm(){try{const e=document.getElementById("quoteForm");if(!e)return;const i=l(e,"submit",async t=>{t.preventDefault(),await this.handleQuoteSubmission(e)},!1,"quote-form-submit");i&&this.listenerIds.push(i),e.querySelectorAll("input, select, textarea").forEach(t=>{const n=l(t,"blur",()=>{this.validateField(t)},!1,"form-validation");n&&this.listenerIds.push(n)}),document.querySelectorAll('input[type="tel"]').forEach(t=>{const n=l(t,"input",()=>{this.formatPhoneNumber(t)},!1,"phone-formatting");n&&this.listenerIds.push(n)}),u("Quote form initialized")}catch(e){c("Error initializing quote form",e)}}async initializeContactForm(){try{const e=document.getElementById("contactForm");if(!e)return;const i=l(e,"submit",async t=>{t.preventDefault(),await this.handleContactSubmission(e)},!1,"contact-form-submit");i&&this.listenerIds.push(i),e.querySelectorAll("input, select, textarea").forEach(t=>{const n=l(t,"blur",()=>{this.validateField(t)},!1,"form-validation");n&&this.listenerIds.push(n)});const s=e.querySelector('input[type="tel"]');if(s){const t=l(s,"input",()=>{this.formatPhoneNumber(s)},!1,"phone-formatting");t&&this.listenerIds.push(t)}u("Contact form initialized")}catch(e){c("Error initializing contact form",e)}}async handleQuoteSubmission(e){try{if(!this.validateForm(e)){h("Please correct the errors in the form before submitting.");return}const i=e.querySelector('button[type="submit"]'),r=i.querySelector(".submit-text"),s=i.querySelector(".loading-text");i.disabled=!0,r.classList.add("d-none"),s.classList.remove("d-none");const t=new FormData(e),n={name:`${t.get("firstName")} ${t.get("lastName")}`.trim(),firstName:t.get("firstName"),lastName:t.get("lastName"),email:t.get("email"),phone:t.get("phone"),address:t.get("address"),propertyType:t.get("propertyType"),foamType:t.get("foamType"),estimatedArea:t.get("estimatedArea")?parseInt(t.get("estimatedArea")):null,urgency:t.get("urgency"),subject:t.get("subject"),message:t.get("message"),preferredContact:t.get("preferredContact"),consent:t.get("consent")==="on"};let o;window.FirebaseConfig&&window.FirebaseConfig.apiCall?o=await window.FirebaseConfig.apiCall("/inquiries",{method:"POST",body:JSON.stringify(n)}):o=await(await fetch("https://europe-west2-foam-fighters-2700b.cloudfunctions.net/api/inquiries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json(),f("Your quote request has been submitted successfully! We'll contact you within 24-48 hours."),e.reset(),this.trackConversion("quote_request",{urgency:n.urgency,propertyType:n.propertyType}),o.inquiry&&o.inquiry.referenceNumber&&f("Thank you! Your quote request has been submitted. Reference number: "+o.inquiry.referenceNumber)}catch(i){c("Error submitting quote form",i),h("There was an error submitting your request. Please try again or call us directly at 0333 577 0132.")}finally{const i=e.querySelector('button[type="submit"]'),r=i.querySelector(".submit-text"),s=i.querySelector(".loading-text");i.disabled=!1,r.classList.remove("d-none"),s.classList.add("d-none")}}async handleContactSubmission(e){try{if(!this.validateForm(e)){h("Please correct the errors in the form before submitting.");return}const i=e.querySelector('button[type="submit"]'),r=i.querySelector(".submit-text")||i,s=i.querySelector(".loading-text");i.disabled=!0,s?(r.classList.add("d-none"),s.classList.remove("d-none")):i.textContent="Submitting...";const t=new FormData(e),n=Array.from(t.getAll("foamLocation[]")),o=Array.from(t.getAll("issues[]")),m={name:`${t.get("firstName")} ${t.get("lastName")}`.trim(),firstName:t.get("firstName"),lastName:t.get("lastName"),email:t.get("email"),phone:t.get("phone"),propertyType:t.get("propertyType"),urgency:t.get("urgency"),postcode:t.get("postcode"),foamLocation:n,foamAge:t.get("foamAge"),issues:o,message:t.get("message"),subject:"Contact Form Submission",preferredContact:"email",consent:t.get("consent")==="on",urgencyLevel:this.mapContactUrgencyToLevel(t.get("urgency"))};let d;window.FirebaseConfig&&window.FirebaseConfig.apiCall?d=await window.FirebaseConfig.apiCall("/inquiries",{method:"POST",body:JSON.stringify(m)}):d=await(await fetch("https://europe-west2-foam-fighters-2700b.cloudfunctions.net/api/inquiries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json(),f("Thank you for your contact! We'll be in touch within 24 hours to discuss your spray foam situation."),e.reset(),this.trackConversion("contact_form",{urgency:m.urgency,propertyType:m.propertyType,issues:o.length}),d.inquiry&&d.inquiry.referenceNumber&&g(()=>{f("Your reference number is: "+d.inquiry.referenceNumber)},2e3)}catch(i){c("Error submitting contact form",i),h("There was an error submitting your message. Please try again or call us directly at 0333 577 0132.")}finally{const i=e.querySelector('button[type="submit"]'),r=i.querySelector(".submit-text")||i,s=i.querySelector(".loading-text");i.disabled=!1,s?(r.classList.remove("d-none"),s.classList.add("d-none")):i.textContent="Submit Contact Request"}}mapContactUrgencyToLevel(e){return{planning:"low",mortgage:"high",sale:"urgent",insurance:"high",emergency:"urgent"}[e]||"medium"}validateForm(e){let i=!0;return e.querySelectorAll("[required]").forEach(s=>{this.validateField(s)||(i=!1)}),i}validateField(e){const i=e.value.trim();let r=!0,s="";if(e.classList.remove("is-invalid","is-valid"),e.hasAttribute("required")&&!i&&(r=!1,s="This field is required."),e.type==="email"&&i&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)||(r=!1,s="Please enter a valid email address.")),e.type==="tel"&&i&&(/^[\+]?[(]?[\d\s\-\(\)]{10,}$/.test(i)||(r=!1,s="Please enter a valid phone number.")),e.type==="number"&&i){const t=parseInt(i),n=parseInt(e.getAttribute("min")),o=parseInt(e.getAttribute("max"));(isNaN(t)||n&&t<n||o&&t>o)&&(r=!1,s=`Please enter a number between ${n||0} and ${o||"unlimited"}.`)}if(r&&i)e.classList.add("is-valid");else if(!r){e.classList.add("is-invalid");const t=e.parentNode.querySelector(".invalid-feedback");t&&(t.textContent=s)}return r}formatPhoneNumber(e){let i=e.value.replace(/\D/g,"");if(i.startsWith("44")?i="+44 "+i.substring(2):i.startsWith("0")&&(i=i.substring(1),i="+44 "+i),i.startsWith("+44")){const r=i.substring(3).replace(/\s/g,"");r.length>=10&&(i=`+44 ${r.substring(0,4)} ${r.substring(4,7)} ${r.substring(7,10)}`)}e.value=i}async initializeChatWidget(){try{const e=document.getElementById("chat-widget");if(!e)return;e.innerHTML=`
                <div class="chat-trigger">
                    <i class="fas fa-comments"></i>
                    Chat with us
                </div>
            `;const i=l(e,"click",()=>{this.openChatWidget()},!1,"chat-widget-click");i&&this.listenerIds.push(i),g(()=>{e.style.display="block",e.style.animation="fadeInUp 0.5s ease"},5e3,"show-chat-widget"),u("Chat widget initialized")}catch(e){c("Error initializing chat widget",e)}}openChatWidget(){const e=document.createElement("div");e.className="modal fade",e.innerHTML=`
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Contact Foam Fighters</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p>We're here to help! Choose your preferred way to get in touch:</p>
                        <div class="d-grid gap-2">
                            <a href="tel:0333577032" class="btn btn-primary">
                                <i class="fas fa-phone me-2"></i>Call: 0333 577 0132
                            </a>
                            <a href="mailto:info@foamfighters.co.uk" class="btn btn-outline-primary">
                                <i class="fas fa-envelope me-2"></i>Email: info@foamfighters.co.uk
                            </a>
                            <a href="#quote-form" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                <i class="fas fa-calculator me-2"></i>Get a Quote
                            </a>
                        </div>
                        <hr>
                        <p class="text-muted small">
                            <strong>Business Hours:</strong> Monday-Friday: 8:00 AM - 6:00 PM<br>
                            <strong>Emergency Service:</strong> Available for urgent property sale situations
                        </p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(e),new bootstrap.Modal(e).show(),e.addEventListener("hidden.bs.modal",()=>{document.body.removeChild(e)})}async initializeScrollEffects(){try{const e={threshold:.1,rootMargin:"0px 0px -50px 0px"},i=new IntersectionObserver(s=>{s.forEach(t=>{t.isIntersecting&&(t.target.style.animation="fadeInUp 0.6s ease forwards",i.unobserve(t.target))})},e);document.querySelectorAll(".problem-card, .process-step, .trust-item").forEach(s=>{s.style.opacity="0",s.style.transform="translateY(20px)",i.observe(s)}),u("Scroll effects initialized")}catch(e){c("Error initializing scroll effects",e)}}async initializeAccessibility(){try{document.addEventListener("shown.bs.modal",r=>{const t=r.target.querySelector("[autofocus], .btn-primary, input, button");t&&t.focus()}),document.querySelectorAll('[role="button"]').forEach(r=>{const s=l(r,"keydown",t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),r.click())},!1,"custom-button-keyboard");s&&this.listenerIds.push(s)}),document.querySelectorAll('[href^="#"]').forEach(r=>{const s=l(r,"click",t=>{const n=document.querySelector(r.getAttribute("href"));n&&(n.focus(),n.scrollIntoView())},!1,"skip-link");s&&this.listenerIds.push(s)}),u("Accessibility features initialized")}catch(e){c("Error initializing accessibility",e)}}async initializeAnalytics(){try{this.trackPageView(),document.querySelectorAll("form").forEach(s=>{const t=l(s,"submit",()=>{this.trackEvent("form_submit",{form_id:s.id||"unknown"})},!1,"form-analytics");t&&this.listenerIds.push(t)}),document.querySelectorAll('a[href^="tel:"]').forEach(s=>{const t=l(s,"click",()=>{this.trackEvent("phone_click",{phone_number:s.getAttribute("href")})},!1,"phone-analytics");t&&this.listenerIds.push(t)}),document.querySelectorAll('a[href^="mailto:"]').forEach(s=>{const t=l(s,"click",()=>{this.trackEvent("email_click",{email:s.getAttribute("href")})},!1,"email-analytics");t&&this.listenerIds.push(t)}),u("Analytics initialized")}catch(e){c("Error initializing analytics",e)}}trackPageView(){try{typeof gtag<"u"&&gtag("config","GA_MEASUREMENT_ID",{page_title:document.title,page_location:window.location.href}),u("Page view tracked",{page:window.location.pathname,title:document.title})}catch(e){c("Error tracking page view",e)}}trackEvent(e,i={}){try{typeof gtag<"u"&&gtag("event",e,i),u("Event tracked",{eventName:e,parameters:i})}catch(r){c("Error tracking event",r)}}trackConversion(e,i={}){try{this.trackEvent("conversion",{conversion_type:e,...i}),u("Conversion tracked",{conversionType:e,data:i})}catch(r){c("Error tracking conversion",r)}}cleanup(){try{u("App cleanup completed")}catch(e){c("Error during cleanup",e)}}}const b=new v;window.addEventListener("beforeunload",()=>{b.cleanup()});window.FoamFightersApp=b;
//# sourceMappingURL=main-2efb0a94.js.map
